<md-card [@initAnimation]>
  <div id="list-actions">
    <md-input-container floatPlaceholder="never">
      <input mdInput
             placeholder="Search list"
             [(ngModel)]="filterText"
             id="company-search">
    </md-input-container>
    <button md-mini-fab
            *ngIf="!showAddCompany">
      <i class="material-icons" (click)="showAddCompany = !showAddCompany">playlist_add</i>
    </button>
    <md-input-container
      floatPlaceholder="never"
      *ngIf="showAddCompany">
      <input mdInput placeholder="Add a new company..."
             [@initAnimation]
             [(ngModel)]="newCompany.title"
             (keyup.enter)="addCompany()"
             id="company-add">
    </md-input-container>
  </div>
  <h4>Companies and tenants </h4>
  <ng-container *ngIf="filterText.length < 1">
    <td-expansion-panel-group *ngFor="let company of companies;">
      <md-divider md-inset></md-divider>
      <td-expansion-panel
        label="{{ company.title }}"
        [@initAnimation]>
        <td-expansion-summary>
          <div fxLayout="row"
               fxLayoutAlign="start center">
            <span fxFlex="5" class="md-subhead">ID</span>
            <span fxFlex="20"><i class="material-icons">chevron_right</i></span>
            <span fxFlex="5">{{company.id}}</span>
          </div>
          <div fxLayout="row"
               fxLayoutAlign="start center">
            <span fxFlex="5" class="md-subhead">Tenants:</span>
            <span fxFlex="20"><i class="material-icons">chevron_right</i></span>
            <span fxFlex="5" *ngIf="company.tenants">{{company.tenants.length}}</span>
          </div>
        </td-expansion-summary>
        <md-list>
          <md-list-item  *ngFor="let tenant of company.tenants;">
              <h4 md-line >{{tenant.title}}</h4>
              <p md-line>Tenant ID: {{tenant.id}}</p>
          </md-list-item>
          <md-divider md-inset></md-divider>
        </md-list>
      </td-expansion-panel>
      <md-divider md-inset></md-divider>
    </td-expansion-panel-group>
  </ng-container>
</md-card>


<div *ngIf="filterText.length > 0">

  <td-expansion-panel-group *ngFor="let company of companies| myCompanyFilter:filterText;">
    <td-expansion-panel label="{{ company.title }}"
                        [@initAnimation]>
      <md-list>
        <md-list-item  *ngFor="let tenant of company.tenants;">
          <h4 md-line >{{tenant.title}}</h4>
          <p md-line>Tenant ID: {{tenant.id}}</p>
        </md-list-item>
        <md-divider md-inset></md-divider>
      </md-list>
    </td-expansion-panel>
  </td-expansion-panel-group>

  <div *ngFor="let company of companies">
    <td-expansion-panel-group *ngFor="let tenant of company.tenants | myTenantFilter:filterText">
    <td-expansion-panel label="{{ tenant.title }}"
                        [@initAnimation]>
      <div>
        <p md-line>Tenant ID: {{tenant.id}}</p>
        <md-divider md-inset></md-divider>
      </div>
    </td-expansion-panel>
    </td-expansion-panel-group>
  </div>

</div>
